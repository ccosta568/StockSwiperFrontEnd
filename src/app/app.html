<main class="app">
	<header class="topbar">
		<h1>{{ title() }}</h1>
		<div class="right">
			<span class="counter" *ngIf="ui() === 'ready'">{{ swipesRemaining() }} left</span>
			<span class="device" *ngIf="deviceId()">ID: {{ deviceId()!.slice(0,8) }}…</span>
		</div>
	</header>

	<section class="content">
			<div class="debug" style="font-size:12px;color:#9ca3af;margin-bottom:8px;">UI: {{ ui() }}</div>
		<ng-container [ngSwitch]="ui()">
			<div *ngSwitchCase="'loading'" class="center">Loading today's stocks…</div>

			<div *ngSwitchCase="'error'" class="center">
				<p>Failed to load stocks. Check your connection and try again.</p>
				<button class="primary" (click)="reload()">Retry</button>
			</div>

			<div *ngSwitchCase="'limit'" class="center">
				<h2>Daily limit reached</h2>
				<p>Come back tomorrow for 20 new stocks!</p>
				<p>Resets in {{ countdownDisplay }}</p>
			</div>

			<div *ngSwitchCase="'complete'" class="center">
				<h2>Great job! You've discovered {{ liked().length }} new stocks today</h2>
				<p>Come back tomorrow for more discoveries</p>
				<p>Resets in {{ countdownDisplay }}</p>
			</div>

			<div *ngSwitchDefault class="deck">
				<app-stock-card *ngIf="current() as s" [stock]="s" (swipe)="onSwipe($event)"></app-stock-card>
				<div class="helper">Swipe right ❤️ to like, left ✖️ to skip</div>
			</div>
		</ng-container>
	</section>
</main>
